/* 
{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "WINDOWS Compile Godot C++ (Release)",
      "type": "shell",
      "command": "python ${workspaceFolder}/clean_godot_cpp_bin.py && scons optimize=speed use_lto=yes platform=windows target=template_release",
      "options": {
        "cwd": "${workspaceFolder}/godot-cpp"
      },
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "dependsOn": [
        "WINDOWS create_necessary_export_directories",
        "WINDOWS Import Git Submodules"
      ]
    },
    {
      "label": "WINDOWS Compile GDExtension (Release and Debug)",
      "type": "shell",
      "command": "python ${workspaceFolder}/copy_obj_from_srcobj_to_src.py && python ${workspaceFolder}/clean_gdextension_bin.py && scons optimize=speed use_lto=yes platform=windows target=template_release && scons optimize=speed use_lto=yes platform=windows target=template_debug && python ${workspaceFolder}/copy_obj_from_src_to_srcobj.py",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "dependsOn": [
        "WINDOWS create_necessary_export_directories",
        "WINDOWS Import Git Submodules"
      ]
    },
    {
      "label": "WINDOWS Export The Godot Game (Release and Debug)",
      "type": "shell",
      "command": "cd ${workspaceFolder}/demo && godot --headless --export-debug \"Windows Desktop\" \"${workspaceFolder}/demo/!export/debug/OcclusionCullingandMeshLOD.exe\" && godot --headless  --export-release \"Windows Desktop\" \"${workspaceFolder}/demo/!export/release/OcclusionCullingandMeshLOD.exe\"",
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "dependsOn": [
        "WINDOWS create_necessary_export_directories",
        "WINDOWS Import Git Submodules"
      ]
    },
    {
      "label": "WINDOWS create_necessary_export_directories",
      "type": "shell",
      "command": "python ${workspaceFolder}/create_necessary_export_directories.py",
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "WINDOWS Import Git Submodules",
      "type": "shell",
      "command": "if not exist \"${workspaceFolder}\\godot-cpp\" (git clone -b 4.2 https://github.com/godotengine/godot-cpp.git && cd godot-cpp) else (exit 0)",
      "group": {
        "kind": "build",
        "isDefault": false
      }
    }
  ]
}
*/ /*
{
  "version": "2.0.0",
  "tasks": [
      {
          "label": "WINDOWS Generate Titan SLN",
          "type": "shell",
          "command": "Titan.bat",
          "group": {
              "kind": "build",
              "isDefault": true
          }
      },
      {
        "label": "LINUX Generate Titan SLN",
        "type": "shell",
        "command": "Titan.sh",
        "group": {
            "kind": "build",
            "isDefault": true
        }
    }
  ]
}
*/

{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Build CatzEngineEditor Release DX11 X64",
      "type": "shell",
      "command": "powershell.exe",
      "args": [
        "-Command",
        "if (!(Test-Path ${workspaceFolder}/build)) { mkdir ${workspaceFolder}/build };",
        "cd ${workspaceFolder};",
        //"cmake -S . -B build -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_CXX_STANDARD=20 -DCMAKE_BUILD_TYPE=Release_DX11 -DCMAKE_GENERATOR_PLATFORM=x64 -DUNICODE=1 -DEE_PRIVATE=1 -DSMAA_HLSL_4_1=1 -DDX11=1;",
        "cmake -S . -B build -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_CXX_STANDARD=20 -DCMAKE_BUILD_TYPE=Release_DX11 -DCMAKE_GENERATOR_PLATFORM=x64 -DUNICODE=1 -DEE_PRIVATE=1 -DSMAA_HLSL_4_1=1 -DDX11=1 -DCMAKE_C_COMPILER=$env:CC -DCMAKE_CXX_COMPILER=$env:CXX;",
        "cmake --build build --config Release_DX11;",
        "if ($LASTEXITCODE -ne 0) { exit $LASTEXITCODE };"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "reveal": "silent",
        "panel": "new"
      },
      "problemMatcher": []
    }
  ]
}
